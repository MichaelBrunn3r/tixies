import{S as t,i as e,s as n,j as s,k as a,l,d as o,f as r,n as c,o as i,g as u,p as f,t as $,r as p,u as d,v as m,w as h,x as v,y as g,z as x,c as w,a as y,e as E,b as S,A as I,m as C,B as k,C as D,h as V,D as b,E as P,F as M,G as T,H as O,I as A,J as F,K as N}from"./client.6e025ad6.js";import{i as R,C as j,t as B}from"./CanvasTixy.31c0ab81.js";const K=t=>({}),q=t=>({}),U=t=>({}),W=t=>({});function _(t){let e;const n=t[3].off,s=p(n,t,t[2],q);return{c(){s&&s.c()},l(t){s&&s.l(t)},m(t,n){s&&s.m(t,n),e=!0},p(t,e){s&&s.p&&4&e&&d(s,n,t,t[2],e,K,q)},i(t){e||($(s,t),e=!0)},o(t){u(s,t),e=!1},d(t){s&&s.d(t)}}}function z(t){let e;const n=t[3].on,s=p(n,t,t[2],W);return{c(){s&&s.c()},l(t){s&&s.l(t)},m(t,n){s&&s.m(t,n),e=!0},p(t,e){s&&s.p&&4&e&&d(s,n,t,t[2],e,U,W)},i(t){e||($(s,t),e=!0)},o(t){u(s,t),e=!1},d(t){s&&s.d(t)}}}function G(t){let e,n,p,d,m,h;const v=[z,_],g=[];function x(t,e){return t[0]?0:1}return n=x(t),p=g[n]=v[n](t),{c(){e=s("button"),p.c()},l(t){e=a(t,"BUTTON",{});var n=l(e);p.l(n),n.forEach(o)},m(s,a){r(s,e,a),g[n].m(e,null),d=!0,m||(h=c(e,"click",t[1]),m=!0)},p(t,[s]){let a=n;n=x(t),n===a?g[n].p(t,s):(i(),u(g[a],1,1,(()=>{g[a]=null})),f(),p=g[n],p?p.p(t,s):(p=g[n]=v[n](t),p.c()),$(p,1),p.m(e,null))},i(t){d||($(p),d=!0)},o(t){u(p),d=!1},d(t){t&&o(e),g[n].d(),m=!1,h()}}}function H(t,e,n){let{$$slots:s={},$$scope:a}=e,{isOn:l=!1}=e;return t.$$set=t=>{"isOn"in t&&n(0,l=t.isOn),"$$scope"in t&&n(2,a=t.$$scope)},[l,function(){n(0,l=!l)},a,s]}class J extends t{constructor(t){super(),e(this,t,H,G,n,{isOn:0})}}function L(t){let e,n,i,f;const h=t[5].default,v=p(h,t,t[4],null);return{c(){e=s("button"),v&&v.c()},l(t){e=a(t,"BUTTON",{});var n=l(e);v&&v.l(n),n.forEach(o)},m(s,a){r(s,e,a),v&&v.m(e,null),n=!0,i||(f=[c(e,"mousedown",t[0]),c(e,"mouseup",t[1]),c(e,"mouseleave",t[1])],i=!0)},p(t,[e]){v&&v.p&&16&e&&d(v,h,t,t[4],e,null,null)},i(t){n||($(v,t),n=!0)},o(t){u(v,t),n=!1},d(t){t&&o(e),v&&v.d(t),i=!1,m(f)}}}function Y(t,e,n){let{$$slots:s={},$$scope:a}=e,{isPressed:l=!1}=e,{tickInterval:o=10}=e;const r=h();let c,i;return v((()=>()=>{c&&clearInterval(c)})),t.$$set=t=>{"isPressed"in t&&n(2,l=t.isPressed),"tickInterval"in t&&n(3,o=t.tickInterval),"$$scope"in t&&n(4,a=t.$$scope)},[function(){n(2,l=!0),r("pressStart"),i=window.performance.now(),c=setInterval((()=>{let t=window.performance.now()-i;r("tick",{start:i,elapsed:t})}),o)},function(){n(2,l=!1),r("pressEnd"),clearInterval(c),c=void 0},l,o,a,s]}class Q extends t{constructor(t){super(),e(this,t,Y,L,n,{isPressed:2,tickInterval:3})}}function X(t){let e;return{c(){e=b("<<")},l(t){e=P(t,"<<")},m(t,n){r(t,e,n)},d(t){t&&o(e)}}}function Z(t){let e,n;return{c(){e=s("span"),n=b("||"),this.h()},l(t){e=a(t,"SPAN",{slot:!0});var s=l(e);n=P(s,"||"),s.forEach(o),this.h()},h(){I(e,"slot","on")},m(t,s){r(t,e,s),k(e,n)},d(t){t&&o(e)}}}function tt(t){let e,n;return{c(){e=s("span"),n=b("►"),this.h()},l(t){e=a(t,"SPAN",{slot:!0});var s=l(e);n=P(s,"►"),s.forEach(o),this.h()},h(){I(e,"slot","off")},m(t,s){r(t,e,s),k(e,n)},d(t){t&&o(e)}}}function et(t){let e;return{c(){e=y()},l(t){e=S(t)},m(t,n){r(t,e,n)},p:M,d(t){t&&o(e)}}}function nt(t){let e;return{c(){e=b(">>")},l(t){e=P(t,">>")},m(t,n){r(t,e,n)},d(t){t&&o(e)}}}function st(t){let e,n,c,i,f,p,d,m;function h(e){t[4].call(null,e)}n=new Q({props:{$$slots:{default:[X]},$$scope:{ctx:t}}}),n.$on("pressStart",t[3]),n.$on("tick",t[2]);let v={$$slots:{default:[et],off:[tt],on:[Z]},$$scope:{ctx:t}};return void 0!==t[0]&&(v.isOn=t[0]),i=new J({props:v}),g.push((()=>x(i,"isOn",h))),d=new Q({props:{$$slots:{default:[nt]},$$scope:{ctx:t}}}),d.$on("pressStart",t[5]),d.$on("tick",t[2]),{c(){e=s("div"),w(n.$$.fragment),c=y(),w(i.$$.fragment),p=y(),w(d.$$.fragment),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=l(e);E(n.$$.fragment,s),c=S(s),E(i.$$.fragment,s),p=S(s),E(d.$$.fragment,s),s.forEach(o),this.h()},h(){I(e,"class","svelte-8s7i5")},m(t,s){r(t,e,s),C(n,e,null),k(e,c),C(i,e,null),k(e,p),C(d,e,null),m=!0},p(t,[e]){const s={};256&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s);const a={};256&e&&(a.$$scope={dirty:e,ctx:t}),!f&&1&e&&(f=!0,a.isOn=t[0],D((()=>f=!1))),i.$set(a);const l={};256&e&&(l.$$scope={dirty:e,ctx:t}),d.$set(l)},i(t){m||($(n.$$.fragment,t),$(i.$$.fragment,t),$(d.$$.fragment,t),m=!0)},o(t){u(n.$$.fragment,t),u(i.$$.fragment,t),u(d.$$.fragment,t),m=!1},d(t){t&&o(e),V(n),V(i),V(d)}}}function at(t,e,n){let s,{playing:a}=e,l=h();function o(t){n(0,a=!1),s=t}return t.$$set=t=>{"playing"in t&&n(0,a=t.playing)},t.$$.update=()=>{1&t.$$.dirty&&l("toggle",a)},[a,o,function(t){const e=t.detail.elapsed;let n=1;e>10&&(n=Math.min(100,Math.pow(2,e/200))),l(s,n)},()=>o("backwards"),function(t){a=t,n(0,a)},()=>o("forwards")]}class lt extends t{constructor(t){super(),e(this,t,at,st,n,{playing:0})}}function ot(t){var e,n=0,s=t.ownerDocument||t.document,a=s.defaultView||s.parentWindow;if(void 0!==a.getSelection){if((e=a.getSelection()).rangeCount>0){var l=a.getSelection().getRangeAt(0),o=l.cloneRange();o.selectNodeContents(t),o.setEnd(l.endContainer,l.endOffset),n=o.toString().length}}else if((e=s.selection)&&"Control"!=e.type){var r=e.createRange(),c=s.body.createTextRange();c.moveToElementText(t),c.setEndPoint("EndToEnd",r),n=c.text.length}return n}function rt(t){let e,n,i;return{c(){e=s("span"),this.h()},l(t){e=a(t,"SPAN",{class:!0,contenteditable:!0}),l(e).forEach(o),this.h()},h(){I(e,"class","input"),I(e,"contenteditable","true")},m(s,a){r(s,e,a),t[11](e),n||(i=[c(e,"input",t[2]),c(e,"keydown",t[1])],n=!0)},p:M,i:M,o:M,d(s){s&&o(e),t[11](null),n=!1,m(i)}}}function ct(t,e,n){var s=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(a,l){function o(t){try{c(s.next(t))}catch(t){l(t)}}function r(t){try{c(s.throw(t))}catch(t){l(t)}}function c(t){t.done?a(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,r)}c((s=s.apply(t,e||[])).next())}))};let a,l,o,{value:r=0}=e,{defaultVal:c=0}=e,{min:i}=e,{max:u}=e,{step:f=1}=e,{altStep:$=null}=e,{shiftStep:p=null}=e,{decimals:d=0}=e;function m(t){return""+Math.round(t*o)/o}function h(t){return Math.round(parseFloat(t)*o)/o}function x(t){t.cancelable&&t.preventDefault();let e=f;null!=$&&t.altKey&&(e=$),null!=p&&t.shiftKey&&(e=p);let s=r+Math.sign(-1*t.deltaY)*e;i&&(s=Math.max(i,s)),u&&(s=Math.min(u,s)),n(3,r=s)}return v((()=>{a.addEventListener("wheel",x)})),t.$$set=t=>{"value"in t&&n(3,r=t.value),"defaultVal"in t&&n(4,c=t.defaultVal),"min"in t&&n(5,i=t.min),"max"in t&&n(6,u=t.max),"step"in t&&n(7,f=t.step),"altStep"in t&&n(8,$=t.altStep),"shiftStep"in t&&n(9,p=t.shiftStep),"decimals"in t&&n(10,d=t.decimals)},t.$$.update=()=>{1024&t.$$.dirty&&(o=Math.pow(10,d)),9&t.$$.dirty&&a&&n(0,a.textContent=m(r),a)},[a,function(t){""!=t.key.replace(/\s/g,"")?l=ot(a):t.preventDefault()},function(t){return s(this,void 0,void 0,(function*(){let t=ot(a),e=h(a.textContent),s=a.textContent;if(R(s)){if(""===s)e=c,t=1;else if(s.startsWith("0")){const n=s.replace(/\D|^0+/g,""),a=s.length-n.length;e=h(s),t-=a}}else e=r,t=l;var o,f,$,p;i&&(e=Math.max(i,e)),u&&(e=Math.min(u,e)),n(3,r=e),n(0,a.textContent=m(r),a),yield T(),o=a,f=Math.min(t,a.textContent.length),$=document.createRange(),p=window.getSelection(),$.setStart(o.childNodes[0],f),$.collapse(!0),p.removeAllRanges(),p.addRange($)}))},r,c,i,u,f,$,p,d,function(t){g[t?"unshift":"push"]((()=>{a=t,n(0,a),n(3,r)}))}]}class it extends t{constructor(t){super(),e(this,t,ct,rt,n,{value:3,defaultVal:4,min:5,max:6,step:7,altStep:8,shiftStep:9,decimals:10})}}function ut(t,e,n){const s=t.slice();return s[19]=e[n],s}function ft(t){let e,n,c,i=t[19]+"";return{c(){e=s("p"),n=b("// "),this.h()},l(t){e=a(t,"P",{class:!0});var s=l(e);n=P(s,"// "),s.forEach(o),this.h()},h(){c=new N(null),I(e,"class","comment svelte-vnmxa")},m(t,s){r(t,e,s),k(e,n),c.m(i,e)},p(t,e){32&e&&i!==(i=t[19]+"")&&c.p(i)},d(t){t&&o(e)}}}function $t(t){let e,n,i,f,p,d,m,h,v,M,T,N,R,B,K,q,U,W,_,z,G,H,J,L,Y,Q,X,Z,tt,et,nt,st,at,ot;function rt(e){t[11].call(null,e)}let ct={code:t[4],n:t[2],frame:t[1],speed:t[3]};function $t(e){t[13].call(null,e)}void 0!==t[0]&&(ct.hasErrorInCode=t[0]),n=new j({props:ct}),g.push((()=>x(n,"hasErrorInCode",rt))),n.$on("click",t[12]);let pt={step:10,shiftStep:100,altStep:1};function dt(e){t[14].call(null,e)}void 0!==t[1]&&(pt.value=t[1]),h=new it({props:pt}),g.push((()=>x(h,"value",$t)));let mt={};function ht(e){t[15].call(null,e)}void 0!==t[6]&&(mt.playing=t[6]),T=new lt({props:mt}),g.push((()=>x(T,"playing",dt))),T.$on("forwards",t[8]),T.$on("backwards",t[9]);let vt={shiftStep:10};function gt(e){t[16].call(null,e)}void 0!==t[3]&&(vt.value=t[3]),q=new it({props:vt}),g.push((()=>x(q,"value",ht)));let xt={shiftStep:10};void 0!==t[2]&&(xt.value=t[2]),_=new it({props:xt}),g.push((()=>x(_,"value",gt)));let wt=t[5],yt=[];for(let e=0;e<wt.length;e+=1)yt[e]=ft(ut(t,wt,e));return{c(){e=s("div"),w(n.$$.fragment),f=y(),p=s("div"),d=s("div"),m=b("Frame:"),w(h.$$.fragment),M=y(),w(T.$$.fragment),R=y(),B=s("div"),K=b("Speed:"),w(q.$$.fragment),W=b("\r\n\t\t\t, Dots:"),w(_.$$.fragment),G=y(),H=s("div");for(let t=0;t<yt.length;t+=1)yt[t].c();J=y(),L=s("div"),Y=s("p"),Q=b("(t,i,x,y,n) => {"),X=y(),Z=s("div"),tt=y(),et=s("p"),nt=b("}"),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=l(e);E(n.$$.fragment,s),f=S(s),p=a(s,"DIV",{class:!0});var r=l(p);d=a(r,"DIV",{class:!0});var c=l(d);m=P(c,"Frame:"),E(h.$$.fragment,c),c.forEach(o),M=S(r),E(T.$$.fragment,r),R=S(r),B=a(r,"DIV",{class:!0});var i=l(B);K=P(i,"Speed:"),E(q.$$.fragment,i),W=P(i,"\r\n\t\t\t, Dots:"),E(_.$$.fragment,i),i.forEach(o),r.forEach(o),G=S(s),H=a(s,"DIV",{class:!0});var u=l(H);for(let t=0;t<yt.length;t+=1)yt[t].l(u);J=S(u),L=a(u,"DIV",{class:!0});var $=l(L);Y=a($,"P",{class:!0});var v=l(Y);Q=P(v,"(t,i,x,y,n) => {"),v.forEach(o),X=S($),Z=a($,"DIV",{class:!0,contenteditable:!0}),l(Z).forEach(o),tt=S($),et=a($,"P",{class:!0});var g=l(et);nt=P(g,"}"),g.forEach(o),$.forEach(o),u.forEach(o),s.forEach(o),this.h()},h(){I(d,"class","param-control-wrapper svelte-vnmxa"),I(B,"class","param-control-wrapper svelte-vnmxa"),I(p,"class","control-wrapper svelte-vnmxa"),I(Y,"class","code svelte-vnmxa"),I(Z,"class","code-input code svelte-vnmxa"),I(Z,"contenteditable","true"),void 0===t[4]&&O((()=>t[17].call(Z))),I(et,"class","code svelte-vnmxa"),I(L,"class","svelte-vnmxa"),A(L,"error",t[0]),I(H,"class","input-wrapper svelte-vnmxa"),I(e,"class","wrapper svelte-vnmxa")},m(s,a){r(s,e,a),C(n,e,null),k(e,f),k(e,p),k(p,d),k(d,m),C(h,d,null),k(p,M),C(T,p,null),k(p,R),k(p,B),k(B,K),C(q,B,null),k(B,W),C(_,B,null),k(e,G),k(e,H);for(let t=0;t<yt.length;t+=1)yt[t].m(H,null);k(H,J),k(H,L),k(L,Y),k(Y,Q),k(L,X),k(L,Z),void 0!==t[4]&&(Z.textContent=t[4]),k(L,tt),k(L,et),k(et,nt),st=!0,at||(ot=c(Z,"input",t[17]),at=!0)},p(t,[e]){const s={};16&e&&(s.code=t[4]),4&e&&(s.n=t[2]),2&e&&(s.frame=t[1]),8&e&&(s.speed=t[3]),!i&&1&e&&(i=!0,s.hasErrorInCode=t[0],D((()=>i=!1))),n.$set(s);const a={};!v&&2&e&&(v=!0,a.value=t[1],D((()=>v=!1))),h.$set(a);const l={};!N&&64&e&&(N=!0,l.playing=t[6],D((()=>N=!1))),T.$set(l);const o={};!U&&8&e&&(U=!0,o.value=t[3],D((()=>U=!1))),q.$set(o);const r={};if(!z&&4&e&&(z=!0,r.value=t[2],D((()=>z=!1))),_.$set(r),32&e){let n;for(wt=t[5],n=0;n<wt.length;n+=1){const s=ut(t,wt,n);yt[n]?yt[n].p(s,e):(yt[n]=ft(s),yt[n].c(),yt[n].m(H,J))}for(;n<yt.length;n+=1)yt[n].d(1);yt.length=wt.length}16&e&&t[4]!==Z.textContent&&(Z.textContent=t[4]),1&e&&A(L,"error",t[0])},i(t){st||($(n.$$.fragment,t),$(h.$$.fragment,t),$(T.$$.fragment,t),$(q.$$.fragment,t),$(_.$$.fragment,t),st=!0)},o(t){u(n.$$.fragment,t),u(h.$$.fragment,t),u(T.$$.fragment,t),u(q.$$.fragment,t),u(_.$$.fragment,t),st=!1},d(t){t&&o(e),V(n),V(h),V(T),V(q),V(_),F(yt,t),at=!1,ot()}}}function pt(t,e,n){let s,a,l,o,r,{tixyId:c}=e,i=h(),u=0,f=!0;v((()=>{let t;return t=requestAnimationFrame((function e(s){f&&n(1,u++,u),t=requestAnimationFrame(e)})),()=>{cancelAnimationFrame(t)}}));return t.$$set=t=>{"tixyId"in t&&n(10,c=t.tixyId)},t.$$.update=()=>{1024&t.$$.dirty&&c&&function(){const t=B.get(c);n(2,s=t.n),n(3,a=t.speed),n(4,l=t.code),n(5,o=t.comments),n(6,f=!0)}(),1&t.$$.dirty&&n(6,f=!r)},[r,u,s,a,l,o,f,i,function(t){n(1,u+=t.detail)},function(t){n(1,u-=t.detail)},c,function(t){r=t,n(0,r)},()=>i("clickTixy"),function(t){u=t,n(1,u)},function(t){f=t,n(6,f),n(0,r)},function(t){a=t,n(3,a)},function(t){s=t,n(2,s)},function(){l=this.textContent,n(4,l)}]}class dt extends t{constructor(t){super(),e(this,t,pt,$t,n,{tixyId:10})}}export{dt as T};
